{"ast":null,"code":"import { takeLatest, put, call, all } from 'redux-saga/effects';\nimport { createProfile, auth, provider } from '../../FireBase/firebase.utils';\nimport { signInFail, signInSuccess } from './user.actions';\nimport { UserActionTypes } from './user.types';\nexport function* checkAuth(user) {\n  try {\n    const userRef = yield call(createProfile, user);\n    const usersnap = yield userRef.get();\n    yield put(signInSuccess({\n      id: usersnap.id,\n      ...usersnap.data()\n    }));\n  } catch (err) {\n    yield put(signInFail(err));\n  }\n}\nexport function* signInGoogle() {\n  try {\n    const {\n      user\n    } = yield auth.signInWithPopup(provider);\n    yield checkAuth(user);\n  } catch (err) {\n    yield put(signInFail(err));\n  }\n}\nexport function* signInGoogleStart() {\n  yield takeLatest(UserActionTypes.GOOGLE_SIGN_IN_START, signInGoogle);\n}\nexport function* signInEmail({\n  payload: {\n    email,\n    password\n  }\n}) {\n  try {\n    const {\n      user\n    } = yield auth.signInWithEmailAndPassword(email, password);\n    yield checkAuth(user);\n  } catch (err) {\n    yield put(signInFail(err));\n  }\n}\nexport function* signInEmailStart() {\n  yield takeLatest(UserActionTypes.EMAIL_SIGN_IN_START, signInEmail);\n}\nexport function* userSagas() {\n  yield all([call(signInGoogleStart), call(signInEmailStart)]);\n}","map":{"version":3,"sources":["C:/Users/Manas/Desktop/Btech/web pr/shopnrock/src/Redux/UserReducer/user.saga.js"],"names":["takeLatest","put","call","all","createProfile","auth","provider","signInFail","signInSuccess","UserActionTypes","checkAuth","user","userRef","usersnap","get","id","data","err","signInGoogle","signInWithPopup","signInGoogleStart","GOOGLE_SIGN_IN_START","signInEmail","payload","email","password","signInWithEmailAndPassword","signInEmailStart","EMAIL_SIGN_IN_START","userSagas"],"mappings":"AAAA,SAAQA,UAAR,EAAmBC,GAAnB,EAAwBC,IAAxB,EAA6BC,GAA7B,QAAuC,oBAAvC;AACA,SAAQC,aAAR,EAAsBC,IAAtB,EAA2BC,QAA3B,QAA0C,+BAA1C;AACA,SAAQC,UAAR,EAAmBC,aAAnB,QAAuC,gBAAvC;AACA,SAAQC,eAAR,QAA8B,cAA9B;AACA,OAAO,UAAUC,SAAV,CAAqBC,IAArB,EAA2B;AAC9B,MAAG;AACC,UAAMC,OAAO,GAAE,MAAMV,IAAI,CAACE,aAAD,EAAeO,IAAf,CAAzB;AACA,UAAME,QAAQ,GAAG,MAAMD,OAAO,CAACE,GAAR,EAAvB;AACA,UAAMb,GAAG,CAACO,aAAa,CAAC;AAACO,MAAAA,EAAE,EAACF,QAAQ,CAACE,EAAb;AAAgB,SAAGF,QAAQ,CAACG,IAAT;AAAnB,KAAD,CAAd,CAAT;AACH,GAJD,CAKA,OAAMC,GAAN,EAAU;AACN,UAAMhB,GAAG,CAACM,UAAU,CAACU,GAAD,CAAX,CAAT;AACH;AACJ;AAED,OAAO,UAAUC,YAAV,GAAwB;AAC3B,MAAG;AACC,UAAM;AAACP,MAAAA;AAAD,QAAO,MAAMN,IAAI,CAACc,eAAL,CAAqBb,QAArB,CAAnB;AACA,UAAMI,SAAS,CAACC,IAAD,CAAf;AACH,GAHD,CAIA,OAAMM,GAAN,EAAU;AACN,UAAMhB,GAAG,CAACM,UAAU,CAACU,GAAD,CAAX,CAAT;AACH;AACJ;AAED,OAAO,UAAUG,iBAAV,GAA+B;AAClC,QAAMpB,UAAU,CAACS,eAAe,CAACY,oBAAjB,EAAsCH,YAAtC,CAAhB;AACH;AAED,OAAO,UAAUI,WAAV,CAAsB;AAACC,EAAAA,OAAO,EAAC;AAACC,IAAAA,KAAD;AAAOC,IAAAA;AAAP;AAAT,CAAtB,EAAkD;AACrD,MAAG;AACC,UAAM;AAACd,MAAAA;AAAD,QAAO,MAAMN,IAAI,CAACqB,0BAAL,CAAgCF,KAAhC,EAAsCC,QAAtC,CAAnB;AACA,UAAMf,SAAS,CAACC,IAAD,CAAf;AACH,GAHD,CAIA,OAAMM,GAAN,EAAU;AACN,UAAMhB,GAAG,CAACM,UAAU,CAACU,GAAD,CAAX,CAAT;AACH;AACJ;AAED,OAAO,UAAUU,gBAAV,GAA6B;AAChC,QAAM3B,UAAU,CAACS,eAAe,CAACmB,mBAAjB,EAAqCN,WAArC,CAAhB;AACH;AAED,OAAO,UAAUO,SAAV,GAAuB;AAC1B,QAAM1B,GAAG,CAAC,CAACD,IAAI,CAACkB,iBAAD,CAAL,EAAyBlB,IAAI,CAACyB,gBAAD,CAA7B,CAAD,CAAT;AACH","sourcesContent":["import {takeLatest,put, call,all} from 'redux-saga/effects';\r\nimport {createProfile,auth,provider} from '../../FireBase/firebase.utils';\r\nimport {signInFail,signInSuccess} from './user.actions';\r\nimport {UserActionTypes} from './user.types';\r\nexport function* checkAuth (user) {\r\n    try{\r\n        const userRef= yield call(createProfile,user);\r\n        const usersnap = yield userRef.get();\r\n        yield put(signInSuccess({id:usersnap.id,...usersnap.data()}));\r\n    }\r\n    catch(err){\r\n        yield put(signInFail(err));\r\n    }\r\n}\r\n\r\nexport function* signInGoogle(){\r\n    try{\r\n        const {user}=yield auth.signInWithPopup(provider);\r\n        yield checkAuth(user);\r\n    }\r\n    catch(err){\r\n        yield put(signInFail(err));\r\n    }\r\n}\r\n\r\nexport function* signInGoogleStart () {\r\n    yield takeLatest(UserActionTypes.GOOGLE_SIGN_IN_START,signInGoogle);\r\n}\r\n\r\nexport function* signInEmail({payload:{email,password}}) {\r\n    try{\r\n        const {user}=yield auth.signInWithEmailAndPassword(email,password);\r\n        yield checkAuth(user);\r\n    }\r\n    catch(err){\r\n        yield put(signInFail(err));\r\n    }\r\n}\r\n\r\nexport function* signInEmailStart (){\r\n    yield takeLatest(UserActionTypes.EMAIL_SIGN_IN_START,signInEmail);\r\n}\r\n\r\nexport function* userSagas () {\r\n    yield all([call(signInGoogleStart),call(signInEmailStart)]);\r\n}"]},"metadata":{},"sourceType":"module"}