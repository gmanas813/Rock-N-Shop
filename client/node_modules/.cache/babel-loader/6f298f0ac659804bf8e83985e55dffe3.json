{"ast":null,"code":"import { takeLatest, put, call, all } from 'redux-saga/effects';\nimport { createProfile, auth, provider, getCurrentUser } from '../../FireBase/firebase.utils';\nimport { signInFail, signInSuccess, signOutSuccess, signOutFail, signUpFail, signUpSuccess } from './user.actions';\nimport { UserActionTypes } from './user.types';\nexport function* checkAuth(user, addDetails) {\n  try {\n    const userRef = yield call(createProfile, user, addDetails);\n    const usersnap = yield userRef.get();\n    yield put(signInSuccess({\n      id: usersnap.id,\n      ...usersnap.data()\n    }));\n  } catch (err) {\n    yield put(signInFail(err));\n  }\n}\nexport function* signInGoogle() {\n  try {\n    const {\n      user\n    } = yield auth.signInWithPopup(provider);\n    yield checkAuth(user);\n  } catch (err) {\n    yield put(signInFail(err));\n  }\n}\nexport function* signInGoogleStart() {\n  yield takeLatest(UserActionTypes.GOOGLE_SIGN_IN_START, signInGoogle);\n}\nexport function* signInEmail({\n  payload: {\n    email,\n    password\n  }\n}) {\n  try {\n    const {\n      user\n    } = yield auth.signInWithEmailAndPassword(email, password);\n    yield checkAuth(user);\n  } catch (err) {\n    yield put(signInFail(err));\n  }\n}\nexport function* signInEmailStart() {\n  yield takeLatest(UserActionTypes.EMAIL_SIGN_IN_START, signInEmail);\n}\nexport function* isUserAuth() {\n  try {\n    const userAuth = yield getCurrentUser();\n    if (!userAuth) return;\n    yield checkAuth(userAuth);\n  } catch (err) {\n    yield put(signInFail(err));\n  }\n}\nexport function* onCheckUserSession() {\n  yield takeLatest(UserActionTypes.CHECK_USER_SESSION, isUserAuth);\n}\nexport function* signout() {\n  try {\n    yield auth.signOut();\n    yield put(signOutSuccess());\n  } catch (err) {\n    yield put(signOutFail(err));\n  }\n}\nexport function* onSignOutStart() {\n  yield takeLatest(UserActionTypes.SIGN_OUT_START, signout);\n}\nexport function* signup({\n  payload: {\n    email,\n    password\n  }\n}) {\n  try {\n    const {\n      user\n    } = yield auth.createUserWithEmailAndPassword(email, password);\n    const userRef = yield call(createProfile, user);\n    const usersnap = yield userRef.get();\n    yield put(signUpSuccess({\n      id: usersnap.id,\n      ...usersnap.data()\n    }));\n  } catch (err) {\n    yield put(signUpFail(err));\n  }\n}\nexport function* onSignUpStart() {\n  yield takeLatest(UserActionTypes.SIGN_UP_START, signup);\n}\nexport function* userSagas() {\n  yield all([call(signInGoogleStart), call(signInEmailStart), call(onCheckUserSession), call(onSignOutStart), call(onSignUpStart)]);\n}","map":{"version":3,"sources":["C:/Users/Manas/Desktop/Btech/web pr/shopnrock/client/src/Redux/UserReducer/user.saga.js"],"names":["takeLatest","put","call","all","createProfile","auth","provider","getCurrentUser","signInFail","signInSuccess","signOutSuccess","signOutFail","signUpFail","signUpSuccess","UserActionTypes","checkAuth","user","addDetails","userRef","usersnap","get","id","data","err","signInGoogle","signInWithPopup","signInGoogleStart","GOOGLE_SIGN_IN_START","signInEmail","payload","email","password","signInWithEmailAndPassword","signInEmailStart","EMAIL_SIGN_IN_START","isUserAuth","userAuth","onCheckUserSession","CHECK_USER_SESSION","signout","signOut","onSignOutStart","SIGN_OUT_START","signup","createUserWithEmailAndPassword","onSignUpStart","SIGN_UP_START","userSagas"],"mappings":"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","sourcesContent":["import {takeLatest,put, call,all} from 'redux-saga/effects';\r\nimport {createProfile,auth,provider,getCurrentUser} from '../../FireBase/firebase.utils';\r\nimport {signInFail,signInSuccess,signOutSuccess,signOutFail,signUpFail, signUpSuccess} from './user.actions';\r\nimport {UserActionTypes} from './user.types';\r\nexport function* checkAuth (user,addDetails) {\r\n    try{\r\n        const userRef= yield call(createProfile,user,addDetails);\r\n        const usersnap = yield userRef.get();\r\n        yield put(signInSuccess({id:usersnap.id,...usersnap.data()}));\r\n    }\r\n    catch(err){\r\n        yield put(signInFail(err));\r\n    }\r\n}\r\n\r\nexport function* signInGoogle(){\r\n    try{\r\n        const {user}=yield auth.signInWithPopup(provider);\r\n        yield checkAuth(user);\r\n    }\r\n    catch(err){\r\n        yield put(signInFail(err));\r\n    }\r\n}\r\n\r\nexport function* signInGoogleStart () {\r\n    yield takeLatest(UserActionTypes.GOOGLE_SIGN_IN_START,signInGoogle);\r\n}\r\n\r\nexport function* signInEmail({payload:{email,password}}) {\r\n    try{\r\n        const {user}=yield auth.signInWithEmailAndPassword(email,password);\r\n        yield checkAuth(user);\r\n    }\r\n    catch(err){\r\n        yield put(signInFail(err));\r\n    }\r\n}\r\n\r\nexport function* signInEmailStart (){\r\n    yield takeLatest(UserActionTypes.EMAIL_SIGN_IN_START,signInEmail);\r\n}\r\n\r\nexport function* isUserAuth () {\r\n    try{\r\n        const userAuth = yield getCurrentUser();\r\n        if(!userAuth) return;\r\n        yield checkAuth(userAuth);\r\n    }\r\n    catch(err){\r\n        yield put(signInFail(err));\r\n    }\r\n}\r\n\r\nexport function* onCheckUserSession () {\r\n    yield takeLatest(UserActionTypes.CHECK_USER_SESSION,isUserAuth);\r\n}\r\n\r\nexport function* signout () {\r\n    try{\r\n        yield auth.signOut();\r\n        yield put(signOutSuccess());\r\n    }\r\n    catch(err){\r\n        yield put(signOutFail(err));\r\n    }\r\n}\r\n\r\nexport function* onSignOutStart () {\r\n    yield takeLatest(UserActionTypes.SIGN_OUT_START,signout);\r\n}\r\n\r\nexport function* signup ({payload:{email,password}}) {\r\n    try{\r\n        const {user}=yield auth.createUserWithEmailAndPassword(email,password);\r\n        const userRef= yield call(createProfile,user);\r\n        const usersnap = yield userRef.get();\r\n        yield put(signUpSuccess({id:usersnap.id,...usersnap.data()}));\r\n    }\r\n    catch(err){\r\n        yield put(signUpFail(err));\r\n    }\r\n}\r\n\r\nexport function* onSignUpStart () {\r\n    yield takeLatest(UserActionTypes.SIGN_UP_START,signup);\r\n}\r\n\r\nexport function* userSagas () {\r\n    yield all([call(signInGoogleStart),call(signInEmailStart),call(onCheckUserSession),call(onSignOutStart),call(onSignUpStart)]);\r\n}"]},"metadata":{},"sourceType":"module"}